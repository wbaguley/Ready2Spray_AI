{
  "query": "CREATE TYPE api_key_permission AS ENUM ('read', 'write', 'delete', 'admin');\n\nCREATE TABLE IF NOT EXISTS api_keys (\n  id SERIAL PRIMARY KEY,\n  organization_id INTEGER NOT NULL REFERENCES organizations(id) ON DELETE CASCADE,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  key_hash VARCHAR(255) NOT NULL,\n  key_prefix VARCHAR(20) NOT NULL,\n  permissions JSONB NOT NULL,\n  scopes JSONB,\n  rate_limit INTEGER DEFAULT 1000,\n  last_used_at TIMESTAMP,\n  usage_count INTEGER DEFAULT 0,\n  expires_at TIMESTAMP,\n  is_active BOOLEAN DEFAULT true NOT NULL,\n  created_at TIMESTAMP DEFAULT NOW() NOT NULL,\n  created_by INTEGER NOT NULL REFERENCES users(id)\n);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3LAnvSXMR8umuBe.5d8fe448309f --database fujBVFVpwsUYDSw4DyaMmw --execute CREATE TYPE api_key_permission AS ENUM ('read', 'write', 'delete', 'admin');\n\nCREATE TABLE IF NOT EXISTS api_keys (\n  id SERIAL PRIMARY KEY,\n  organization_id INTEGER NOT NULL REFERENCES organizations(id) ON DELETE CASCADE,\n  name VARCHAR(255) NOT NULL,\n  description TEXT,\n  key_hash VARCHAR(255) NOT NULL,\n  key_prefix VARCHAR(20) NOT NULL,\n  permissions JSONB NOT NULL,\n  scopes JSONB,\n  rate_limit INTEGER DEFAULT 1000,\n  last_used_at TIMESTAMP,\n  usage_count INTEGER DEFAULT 0,\n  expires_at TIMESTAMP,\n  is_active BOOLEAN DEFAULT true NOT NULL,\n  created_at TIMESTAMP DEFAULT NOW() NOT NULL,\n  created_by INTEGER NOT NULL REFERENCES users(id)\n);",
  "returncode": 1,
  "logs": [
    "ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your TiDB version for the right syntax to use line 1 column 11 near \"TYPE api_key_permission AS ENUM ('read', 'write', 'delete', 'admin')\""
  ]
}