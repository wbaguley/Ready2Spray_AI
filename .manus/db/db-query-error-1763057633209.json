{
  "query": "DO $$\nBEGIN\n  IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'system_role') THEN\n    CREATE TYPE system_role AS ENUM ('admin', 'manager', 'technician', 'sales', 'ops', 'viewer');\n  END IF;\nEND$$;\n\nALTER TABLE users ADD COLUMN IF NOT EXISTS system_role system_role DEFAULT 'viewer';",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3LAnvSXMR8umuBe.cb88ed38e99c --database 6adCeCxV2Yg38ygq7gdRsu --execute DO $$\nBEGIN\n  IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'system_role') THEN\n    CREATE TYPE system_role AS ENUM ('admin', 'manager', 'technician', 'sales', 'ops', 'viewer');\n  END IF;\nEND$$;\n\nALTER TABLE users ADD COLUMN IF NOT EXISTS system_role system_role DEFAULT 'viewer';",
  "returncode": 1,
  "logs": [
    "ERROR 1064 (42000) at line 1: You have an error in your SQL syntax; check the manual that corresponds to your TiDB version for the right syntax to use line 2 column 6 near \"BEGIN",
    "  IF NOT EXISTS (SELECT 1 FROM pg_type WHERE typname = 'system_role') THEN",
    "    CREATE TYPE system_role AS ENUM ('admin', 'manager', 'technician', 'sales', 'ops', 'viewer')\""
  ]
}